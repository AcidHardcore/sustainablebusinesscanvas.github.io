/*! project-name v0.0.1 | (c) 2020 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
function findVideos(){let e=document.querySelectorAll(".video");for(let t=0;t<e.length;t++)setupVideo(e[t])}function setupVideo(e){let t=e.querySelector(".video__link"),n=e.querySelector(".video__media"),i=e.querySelector(".video__button"),o=parseMediaURL(n);e.addEventListener("click",()=>{let n=createIframe(o);t.remove(),i.remove(),e.appendChild(n)}),t.removeAttribute("href"),e.classList.add("video--enabled")}function parseMediaURL(e){return e.src.match(/https:\/\/i\.ytimg\.com\/vi\/([a-zA-Z0-9_-]+)\/maxresdefault\.jpg/i)[1]}function createIframe(e){let t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("allow","autoplay"),t.setAttribute("src",generateURL(e)),t.classList.add("video__media"),t}function generateURL(e){return"https://www.youtube.com/embed/"+e+"?rel=0&showinfo=0&autoplay=1"}!(function(){if(window.matchMedia("(max-width: 767px)").matches)return;const add=function(e,t){return e+t},getWDs=function(){return{h:window.innerHeight||document.documentElement.clientHeight,w:window.innerWidth||document.documentElement.clientWidth}},inFocus=function(e){let t=e.getBoundingClientRect(),n=getWDs().h/2,i=getWDs().w/2,o=!1,l=t.top<=n&&t.top>=0||t.bottom<=getWDs().h&&t.bottom>=n||t.top<=0&&t.bottom>=n;return(t.left<i&&t.left>=0||t.right<getWDs().w&&t.right>i)&&l&&(o=!0),o},scrollWindow=function(_target,_label,_speed){let scene=eval(_target.dataset.scene),timeline=eval(_target.dataset.timeline),timelineDuration=timeline.duration(),tlLabel="timeline.labels."+_label,labelTime=eval(tlLabel),nMTime=0;nMTime=timelineDuration!=labelTime&&null!=labelTime?labelTime/getRatio(scene.duration(),timeline.duration()):timeline.duration()/getRatio(scene.duration(),timeline.duration());let scrollLoc=scene.scrollOffset()+nMTime;gsap.to(window,_speed,{scrollTo:{y:scrollLoc}})},getRatio=function(e,t){return e>t?t/e:e/t};let sectionCount=2,shiftWidth="-="+100/sectionCount+"%";const controller=new ScrollMagic.Controller,horizontalSlide=gsap.timeline().addLabel("scene_00").to("#sections-container",.5,{z:-150,rotation:.01}).to("#sections-container",{x:shiftWidth}).to("#sections-container",.5,{z:0,rotation:.01}),sideScroll=new ScrollMagic.Scene({triggerElement:"#pinContainer",triggerHook:"onLeave",duration:"200%"}).setPin("#pinContainer").setTween(horizontalSlide).addTo(controller),onNavClick=function(e){e.preventDefault();let t=e.currentTarget;scrollWindow(t,t.dataset.label,1.5)};let anchors=document.querySelectorAll(".menu__link");function resetNavHit(e){anchors.forEach((function(e){e.classList.remove("menu__link--active")})),e.classList.add("menu__link--active")}anchors.forEach((function(e){e.addEventListener("click",onNavClick)}));let sections=document.querySelectorAll(".slider__item");const setSelectedSection=function(){sections.forEach((function(e,t){inFocus(e)&&resetNavHit(anchors[t])}))};document.addEventListener("scroll",(function(){setSelectedSection()})),setSelectedSection()})(),(function(){var e=document.getElementById("main-nav-toggler");if(e){e.addEventListener("click",(function(t){t.preventDefault(),e.classList.toggle("burger--close"),document.getElementById("main-nav").classList.toggle("main-nav--open")}))}var t=new RegExp("main-nav__link");document.addEventListener("focus",(function(e){t.test(e.target.className)&&e.target.parents(".main-nav__item").forEach((function(e){e.classList.add("main-nav__item--show-child")}))}),!0),document.addEventListener("blur",(function(e){t.test(e.target.className)&&document.querySelectorAll(".main-nav__item--show-child").forEach((function(e){e.classList.remove("main-nav__item--show-child")}))}),!0),Element.prototype.parents=function(e){for(var t=[],n=this,i=void 0!==e;null!==(n=n.parentElement);)n.nodeType===Node.ELEMENT_NODE&&(i&&!n.matches(e)||t.push(n));return t}})(),(function(){var e=document.getElementById("video-modal"),t=document.querySelector(".top__video"),n=e.querySelector(".close");const i=function(e){const t=e.querySelector("iframe"),n=e.querySelector("video");t&&(t.setAttribute("allow",""),t.src=t.src.replace("&autoplay=1","")),n&&n.pause()};t.addEventListener("click",(function(t){t.preventDefault(),e.classList.add("modal__show")})),n.addEventListener("click",(function(t){t.preventDefault(),e.classList.remove("modal__show"),i(e)})),window.addEventListener("click",(function(t){t.target===e&&(e.classList.remove("modal__show"),i(e))}))})(),findVideos();